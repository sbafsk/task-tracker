<%= form_with(model: [project, task], local: true, class: "space-y-6") do |f| %>
  <% if task.errors.any? %>
    <div class="flex p-4 mb-4 text-sm text-danger-800 rounded-lg bg-danger-50 border border-danger-200" role="alert">
      <svg class="flex-shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
      </svg>
      <div>
        <span class="font-medium"><%= pluralize(task.errors.count, "error") %> prohibited this task from being saved:</span>
        <ul class="mt-1.5 list-disc list-inside">
          <% task.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    </div>
  <% end %>

  <div>
    <%= f.label :title, "Task Title", class: "block mb-2 text-sm font-medium text-secondary-900" %>
    <%= f.text_field :title, class: "bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5", placeholder: "e.g., Design homepage mockup", required: true %>
  </div>

  <div>
    <%= f.label :description, "Description", class: "block mb-2 text-sm font-medium text-secondary-900" %>
    <%= f.text_area :description, class: "bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5", placeholder: "Add more details about this task...", rows: 4 %>
    <p class="mt-2 text-sm text-secondary-500">Optional: Provide additional context or requirements</p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
      <%= f.label :status, "Status", class: "block mb-2 text-sm font-medium text-secondary-900" %>
      <%= f.select :status,
          options_for_select([
            ['Todo', 'todo'],
            ['In Progress', 'in_progress'],
            ['Done', 'done']
          ], task.status),
          {},
          class: "bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5",
          required: true %>
    </div>

    <div>
      <%= f.label :priority, "Priority", class: "block mb-2 text-sm font-medium text-secondary-900" %>
      <%= f.select :priority,
          options_for_select([
            ['1 - Highest', 1],
            ['2 - High', 2],
            ['3 - Medium', 3],
            ['4 - Low', 4],
            ['5 - Lowest', 5]
          ], task.priority || 3),
          { include_blank: false },
          class: "bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5",
          required: true %>
    </div>
  </div>

  <div>
    <%= f.label :due_date, "Due Date", class: "block mb-2 text-sm font-medium text-secondary-900" %>
    <%= f.date_field :due_date, class: "bg-secondary-50 border border-secondary-300 text-secondary-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5" %>
    <p class="mt-2 text-sm text-secondary-500">Optional: Set a deadline for this task</p>
  </div>

  <div class="flex items-center gap-3 pt-4 border-t border-secondary-200">
    <%= f.submit class: "btn-primary" %>
    <%= link_to "Cancel", project_path(project), class: "btn-secondary" %>
  </div>
<% end %>
